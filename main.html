<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <link rel="stylesheet" type="text/css" href="style.css" />
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
</head>
<body>

<div class="main">
  <div class="div">
    <div class="sub-btn-box">
      <div class="event-box">
        <div class="overlap">
          <div class="sub-event-img"></div>
          <div class="event-text">Event</div>
        </div>
      </div>
      <div class="pencil-box">
        <div class="flexcontainer-wrapper">
          <div class="flexcontainer">
            <p class="text">
              <span class="text-wrapper">Apple<br /></span>
            </p>
            <p class="text"><span class="text-wrapper">Pencil</span></p>
          </div>
        </div>
      </div>
      <div class="box">
        <div class="m4-box"></div>
      </div>
      <div class="stage-box">
        <div class="stage-text">Stage Manager</div>
        <img src="images/sub_stage_img.svg">
      </div>
    </div>
    <div class="indicator">
      <div class="dot active"></div>
      <div class="dot"></div>
      <div class="dot"></div>
      <div class="dot"></div>
    </div>

    <div class="carousel">
      <div class="window">
        <div class="main-pencil-box">
          <div class="P-flexcontainer">
            <span class="span">픽셀 단위의 정밀함, 짧은 지연 시간, <br /></span>
            <span class="span">기울임 감지 기능, 팜리젝션 기능.<br /></span>
            <span class="span">완전히 새로워진 Apple Pencil Pro.</span>
          </div>
          <div class="pencil-big-title">새롭게 쓰는 창의성.</div>
        </div>
        <img class="carousel_pencil" src="images/carousel_pencil.png" />
      </div>  

      <div class="window">
        <img class="carousel_speaker" src="images/carousel_speaker.png" />
        <div class="speaker-box">
          <div class="S-flexcontainer">
            <p class="text">
              <span class="text-wrapper">Dolby Atmos를 지원하는<br /></span>
            </p>
            <p class="text">
              <span class="text-wrapper">4 스피커 오디오 시스템으로 <br /></span>
            </p>
            <p class="text"><span class="text-wrapper">뛰어난 오디오 경험.</span></p>
          </div>
          <div class="speaker-big-title">볼륨 UP, 기분 UP.</div>
        </div>
      </div>
    
      <div class="window">
        <div class="m-flexcontainer">
          <p class="text">
            <span class="text-wrapper">새롭게 선보이는 Apple M4 칩. <br /></span>
          </p>
          <p class="text">
            <span class="text-wrapper">기막히게 강력한 성능, 게임의 판도를<br /></span>
          </p>
          <p class="text"><span class="text-wrapper">바꾸는 그래픽 그리고 막강한 AI 역량.</span></p>
        </div>
        <div class="m4-big-title">속도에 미치다.</div>
        <img class="carousel_m4" src="images/carousel_m4.png" />
      </div>

      <div class="window">
        <div class="workflow-box">
          <div class="Sm-flexcontainer">
            <p class="text">
              <span class="text-wrapper">스테이지 매니저와 함께 <br /></span>
            </p>
            <p class="text">
              <span class="text-wrapper">고사양 워크플로를 거침없이 해치우고,<br /></span>
            </p>
            <p class="text"><span class="text-wrapper">즐겨 하는 모든 일을 쉽고 간편하게.</span></p>
          </div>
          <div class="Sm-big-title">거뜬히, 거침없이.</div>
        </div>
        <img class="carousel_stage" src="images/carousel_stage.png" />
      </div>
    </div>

    <div class="MAIN-NAV">
      <div class="group-wrapper">
        <div class="group">
          <img class="icon-ionicons" src="images/main_nav_logo.svg" />
          <img class="solar-figma-bold" src="images/solar_figma-bold.svg" />
          <div class="text-wrapper-2">iPad Pro 13</div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  let windows;
  let currentIndex = 0;
  let startX;
  let endX;
  let offsetX = 0;
  let targetOffsetX = 0;
  let lerpSpeed = 0.1;
  
  function setup() {
    noCanvas();
    windows = document.querySelectorAll('.window');
    updateCarousel();
  }
  
  function draw() {
    offsetX = lerp(offsetX, targetOffsetX, lerpSpeed);
    updateCarousel();
  }
  
  function touchStarted() {
    startX = mouseX;
    return false;
  }
  
  function touchEnded() {
    endX = mouseX;
    let swipeDistance = endX - startX;
  
    if (swipeDistance > 50) {
      currentIndex = max(0, currentIndex - 1);
    } else if (swipeDistance < -50) {
      currentIndex = min(windows.length - 1, currentIndex + 1);
    }
  
    targetOffsetX = currentIndex * windowWidth;
    updateIndicators();
    return false;
  }
  
  function updateCarousel() {
    windows.forEach((window, index) => {
      let offset = index * windowWidth - offsetX;
      window.style.transform = `translateX(${offset}px)`;
    });
  }
  
  function updateIndicators() {
    const dots = document.querySelectorAll('.dot');
    dots.forEach((dot, index) => {
      if (index === currentIndex) {
        dot.classList.add('active');
      } else {
        dot.classList.remove('active');
      }
    });
  }
  
  document.addEventListener('DOMContentLoaded', () => {
    setup();
    window.addEventListener('touchstart', touchStarted);
    window.addEventListener('touchend', touchEnded);
  });
  </script>

</body>
</html>
